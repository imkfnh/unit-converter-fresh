<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unit Converter</title>
  <link rel="manifest" href="manifest.json">

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #002B60;
      color: #72C7FC;
      transition: background 0.3s, color 0.3s;
      padding-top: 130px;
      padding-bottom: 90px;
    }

    body.dark {
      background-color: #0A1A33;
      color: #CFE8FF;
    }

    body.dark .card {
      background: #0F2A4F;
      border-color: rgba(255,255,255,0.15);
    }

    body.dark input,
    body.dark select {
      background-color: #0F3A6A;
      color: #CFE8FF;
      border-color: #CFE8FF;
    }

    body.dark button {
      background: linear-gradient(180deg, #4A6BB0, #324A7A);
      color: #E8F1FF;
    }

    body.dark .bottom-toolbar {
      background: #0A1A33;
      border-top-color: rgba(255,255,255,0.2);
    }

    input,
    select {
      padding: 12px;
      font-size: 1.1rem;
      margin: 8px 0;
      width: 100%;
      max-width: 320px;
      background-color: #02519C;
      color: #72C7FC;
      border: 1px solid #72C7FC;
      border-radius: 6px;
      display: block;
      margin-left: auto;
      margin-right: auto;
      transition: box-shadow 0.2s ease, transform 0.1s ease;
      text-align-last: center;
    }

    input:focus,
    select:focus {
      outline: none;
      box-shadow: 0 0 12px rgba(114,199,252,0.7);
      transform: scale(1.03);
    }

    button {
      width: 100%;
      max-width: 320px;
      padding: 14px 20px;
      margin: 14px auto;
      font-size: 1.15rem;
      font-weight: 600;
      background: linear-gradient(180deg, #3A5BA0, #2C447A);
      color: #E8F1FF;
      border: none;
      border-radius: 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.35);
      transition: transform 0.12s ease, box-shadow 0.12s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      cursor: pointer;
    }

    button:active {
      transform: scale(0.96);
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }

    .haptic-tap {
      animation: hapticTap 120ms ease-out;
    }

    @keyframes hapticTap {
      0% { transform: scale(1); }
      40% { transform: scale(0.94); }
      100% { transform: scale(1); }
    }

    .result-box {
      margin: 50px auto;
      padding: 24px;
      width: 80%;
      max-width: 320px;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(50px);
      -webkit-backdrop-filter: blur(50px);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,0.25);
      box-shadow: 0 8px 30px rgba(0,0,0,0.45);
      text-align: center;
      animation: fadeIn 0.4s ease;
    }

    #result {
      font-size: 2.4rem;
      font-weight: bold;
      min-height: 2.4rem;
    }

    .result-gradient {
      background: linear-gradient(180deg, #A0C9FF 0%, #43B6FE 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .result-updated {
      animation: resultFade 0.25s ease-out;
    }

    @keyframes resultFade {
      from { opacity: 0; transform: translateY(4px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .fraction-line {
      margin-top: 6px;
      text-align: center;
      font-size: 1.2rem;
      color: #A8D9FF;
      opacity: 0.9;
    }

    .app-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 120px;
      background: #001A3D;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.4);
    }

    .header-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .card {
      background: #01356F;
      padding: 25px 20px;
      border-radius: 16px;
      max-width: 380px;
      margin: 0 auto;
      box-shadow: 0 6px 20px rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.08);
      opacity: 0;
      transform: translateY(10px);
      animation: cardFade 0.4s ease forwards;
    }

    @keyframes cardFade {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .bottom-toolbar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 70px;
      background: #001A3D;
      border-top: 1px solid rgba(255,255,255,0.15);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 22px;
      box-shadow: 0 -4px 12px rgba(0,0,0,0.35);
      z-index: 999;
    }

    .toolbar-left {
      display: flex;
      gap: 18px;
    }

    .toolbar-btn {
      background: none;
      border: none;
      color: #A0C9FF;
      font-size: 1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 6px 10px;
      border-radius: 10px;
      transition: background 0.2s, transform 0.15s;
      cursor: pointer;
    }

    .toolbar-btn:active {
      transform: scale(0.92);
      background: rgba(255,255,255,0.1);
    }

    .category-btn {
      background: linear-gradient(180deg, #3A5BA0, #2C447A);
      color: #E8F1FF;
      border-radius: 999px;
      padding: 10px 24px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      font-size: 1rem;
      font-weight: 600;
    }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: flex;
      justify-content: center;
      align-items: flex-end;
      z-index: 2000;
      transition: opacity 0.25s ease;
    }

    .modal-backdrop.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .modal-sheet {
      width: 100%;
      max-width: 420px;
      background: #01356F;
      padding: 25px;
      border-radius: 22px 22px 0 0;
      box-shadow: 0 -6px 20px rgba(0,0,0,0.4);
      animation: slideUp 0.25s ease;
    }

    @keyframes slideUp {
      from { transform: translateY(40px); opacity: 0; }
      to   { transform: translateY(0); opacity: 1; }
    }

    .modal-sheet h2 {
      text-align: center;
      margin-bottom: 18px;
      color: #E8F1FF;
    }

    .modal-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .modal-option-btn {
      padding: 14px;
      border-radius: 12px;
      background: #02519C;
      color: #E8F1FF;
      font-size: 1.1rem;
      text-align: left;
      border: 1px solid rgba(255,255,255,0.15);
      transition: background 0.2s, transform 0.1s;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .modal-option-btn:active {
      background: #013A78;
      transform: scale(0.97);
    }

    .cat-icon {
      width: 28px;
      height: 28px;
      object-fit: contain;
    }
  </style>
</head>

<body class="dark">

  <header class="app-header">
    <img src="header.jpeg" alt="Header Image" class="header-img">
  </header>

  <div class="card">
    <h1>Unit Converter</h1>

    <input id="inputValue" type="text" inputmode="decimal" placeholder="Enter value">

    <select id="fromUnit"></select>
    <select id="toUnit"></select>

    <div class="result-box">
      <div id="result" class="result-gradient"></div>
      <div id="fractionResult" class="fraction-line"></div>
    </div>

    <button id="swapBtn">Swap Units</button>
    <button id="roundBtn" style="display:none;">Round</button>
  </div>

  <div class="bottom-toolbar">
    <div class="toolbar-left">
      <button class="toolbar-btn" id="modeBtn">Mode</button>
      <button class="toolbar-btn" id="themeBtn">Theme</button>
    </div>
    <button class="toolbar-btn category-btn" id="categoryBtn">Category</button>
  </div>

  <div id="categoryModal" class="modal-backdrop hidden">
    <div class="modal-sheet">
      <h2>Select Category</h2>
      <div id="categoryList" class="modal-options"></div>
    </div>
  </div>

  <script>
    const unitLabels = {
      cups: "cups",
      ounces: "ounces",
      tablespoons: "tablespoons",
      teaspoons: "teaspoons",
      pints: "pints",
      quarts: "quarts",
      gallons: "gallons",
      milliliters: "milliliters",

      celsius: "Celsius",
      fahrenheit: "Fahrenheit",

      grams: "grams",
      kilograms: "kilograms",
      pounds: "pounds",

      kmh: "kilometers per hour",
      mph: "miles per hour",
      knots: "knots",

      cm: "centimeters",
      m: "meters",
      inches: "inches",
      feet: "feet",
      km: "kilometers",
      miles: "miles",

      UTC: "UTC",
      MST: "Mountain Standard Time",
      CST: "Central Standard Time",
      EST: "Eastern Standard Time",
      PST: "Pacific Standard Time",

      EUR: "Euro",
      USD: "US Dollar",
      GBP: "British Pound",
      CAD: "Canadian Dollar",
      AUD: "Australian Dollar",

      sqft: "square foot (ft²)",
      sqyd: "square yard (yd²)",
      acre: "acre (ac)",
      sqmi: "square mile (mi²)",
      sqkm: "square kilometer (km²)",
      sqin: "square inch (in²)",
      sqmm: "square millimeter (mm²)",
      sqcm: "square centimeter (cm²)",
      sqm: "square meter (m²)",
      hectare: "hectare (ha)"
    };

    const prettyUnits = {
      cups: "cups",
      ounces: "oz",
      tablespoons: "tbsp",
      teaspoons: "tsp",
      pints: "pt",
      quarts: "qt",
      gallons: "gal",
      milliliters: "ml",

      celsius: "°C",
      fahrenheit: "°F",

      grams: "g",
      kilograms: "kg",
      pounds: "lb",

      kmh: "km/h",
      mph: "mph",
      knots: "kn",

      cm: "cm",
      m: "m",
      inches: "in",
      feet: "ft",
      km: "km",
      miles: "mi",

      UTC: "UTC",
      MST: "MST",
      CST: "CST",
      EST: "EST",
      PST: "PST",

      EUR: "EUR",
      USD: "USD",
      GBP: "GBP",
      CAD: "CAD",
      AUD: "AUD",

      sqft: "ft²",
      sqyd: "yd²",
      acre: "ac",
      sqmi: "mi²",
      sqkm: "km²",
      sqin: "in²",
      sqmm: "mm²",
      sqcm: "cm²",
      sqm: "m²",
      hectare: "ha"
    };

    class ConverterEngine {
      constructor() {
        this.categories = {
          volume: ["tablespoons", "teaspoons", "cups", "ounces", "pints", "quarts", "gallons", "milliliters"],
          temperature: ["celsius", "fahrenheit"],
          weight: ["grams", "kilograms", "ounces", "pounds"],
          speed: ["kmh", "mph", "knots"],
          timezone: ["UTC", "MST", "CST", "EST", "PST"],
          length: ["cm", "m", "inches", "feet", "km", "miles"],
          currency: ["EUR", "USD", "GBP", "CAD", "AUD"],
          area: [
            "sqft",
            "sqyd",
            "acre",
            "sqmi",
            "sqkm",
            "sqin",
            "sqmm",
            "sqcm",
            "sqm",
            "hectare"
          ]
        };

        this.defaults = {
          volume: ["tablespoons", "milliliters"],
          temperature: ["celsius", "fahrenheit"],
          weight: ["kilograms", "pounds"],
          speed: ["kmh", "mph"],
          timezone: ["UTC", "MST"],
          length: ["cm", "inches"],
          currency: ["EUR", "USD"],
          area: ["sqm", "sqft"]
        };
      }

      getCategories() {
        return Object.keys(this.categories);
      }

      getUnits(category) {
        return this.categories[category] || [];
      }

      getDefaultUnits(category) {
        return this.defaults[category] || [];
      }

      convert(category, value, from, to) {
        if (isNaN(value)) return "";

        switch (category) {
          case "volume": {
            const vol = {
              cups: 1,
              ounces: 8,
              tablespoons: 16,
              teaspoons: 48,
              pints: 0.5,
              quarts: 0.25,
              gallons: 0.0625,
              milliliters: 236.588
            };
            return value * (vol[to] / vol[from]);
          }

          case "temperature":
            if (from === "celsius" && to === "fahrenheit") return value * 9/5 + 32;
            if (from === "fahrenheit" && to === "celsius") return (value - 32) * 5/9;
            return value;

          case "weight": {
            const wt = {
              grams: 1,
              kilograms: 1000,
              ounces: 28.3495,
              pounds: 453.592
            };
            return value * (wt[to] / wt[from]);
          }

          case "speed": {
            const spd = {
              kmh: 1,
              mph: 1.60934,
              knots: 1.852
            };
            const kmhValue = value * spd[from];
            return kmhValue / spd[to];
          }

          case "length": {
            const len = {
              cm: 0.01,
              m: 1,
              inches: 0.0254,
              feet: 0.3048,
              km: 1000,
              miles: 1609.34
            };
            return value * (len[from] / len[to]);
          }

          case "timezone": {
            const offsets = {
              UTC: 0,
              MST: -7,
              CST: -6,
              EST: -5,
              PST: -8
            };
            return value + (offsets[to] - offsets[from]);
          }

          case "currency": {
